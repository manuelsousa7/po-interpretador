
   Bank Application

Um banco tem zero ou mais contas e zero ou mais titulares e é identificado univocamente pelo seu nome. A classe Bank deve disponibilizar métodos que permitam guardar/remover contas e titulares. Do ponto de vista de um banco, tanto as contas como os titulares são identificados por um número. Quando é iniciada a aplicação bancária e se pretende criar um banco novo, é necessário indicar o nome do banco que se pretende criar. Adicionalmente, as funcionalidades que um banco deve disponibilizar são as seguintes:

Criação de contas: recebe o valor do saldo inicial e devolve o número da nova conta.
Remoção de contas: recebe o número da conta a apagar. A conta só é apagada se o seu saldo total for igual a zero. Caso não seja possível apagar a conta, é apresentada uma mensagem justificativa.
Criação de titulares: recebe o nome do titular e número de identificação.
Remoção de titulares: recebe o número de identificação do titular.
As classes Bank, SavingsAccount, BankAccount e Holder devem disponibilizar um menu com as operações disponíveis para cada caso. Esta funcionalidade deve ser concretizada pelo método menu definido em cada classe. Por exemplo, as operações disponíveis no menu de um banco são:

- Criar um titular;
- Criar uma conta;
- Listar todos os titulares ordenados por ordem crescente de nome ou de número;
- Listar todas as contas;
- Aceder às operações de um determinado titular;
- Aceder às operações de uma determinada conta;
- Alterar a data actual.

A classe Holder representa cada um dos titulares de uma conta bancária. Um titular tem um nome é identificado univocamente por um número de cliente. Tem métodos que permitem aceder ao seu estado interno, e.g., obter o nome, assim como para alterar esse estado (apenas o nome). Dois titulares são iguais se os seus números de cliente forem iguais. A classe Holder deve oferecer a possibilidade de ordenar titulares por ordem crescente do seu número cliente ou por nome. Para tal, é necessário definir dois tipos de comparadores distintos (que em Java são representados por classes que implementam a interface java.util.Comparator). A relação do cliente com o banco traduz-se na existência de uma conta bancária (a não confundir com as contas que gerem directamente o dinheiro, e.g., conta à ordem).

Uma conta bancária ( BankAccount ) está associada a uma conta à ordem ( DemandAccount ) e a zero ou mais contas de poupança (a prazo) ( SavingsAccount ). A conta à ordem mantém o saldo à ordem da conta bancária. A conta bancária é identificada por um número único e pode ter um número qualquer de titulares, podendo ser adicionados novos titulares em qualquer altura. A conta permite operações de levantamento, depósito e consulta do saldo (respectivamente, métodos withdraw, deposit e getDemandAccountBalance), as quais são realizadas sobre o depósito à ordem associado à conta. O método getBalance, além do saldo da conta à ordem, considera ainda o saldo de todos as contas poupança. As contas bancárias podem ser ordenadas de acordo com o seu o número (sugere-se que BankAccount implemente a interface java.util.Comparable) e são consideradas iguais se tiverem o mesmo número de conta. Uma conta só pode ser removida do banco se tiver um saldo total igual a zero. Resumindo, uma conta bancárias permite as seguintes operações:

- Depositar/levantar um determinado valor;
- Visualizar o saldo corrente ou total;
- Listar os seus titulares;
- Listar os seus depósitos a prazo;
- Adicionar um depósito a prazo;
- Verificar se pode ser removida.
As contas à ordem ( DemandAccount ) e de poupança (a prazo) ( SavingsAccount ) são especializações da classe DepositAccount (conta de depósito), que define uma interface comum para os vários tipos de conta e permite alguma reutilização de código, sendo identificadas as suas instâncias por um número único, atribuído no momento de criação. Estas instâncias mantêm ainda informação sobre o saldo, a taxa de juro e uma data de início (definida no momento da criação). Duas contas de depósito são iguais se tiverem o mesmo número. Cada conta de depósito apresenta a seguinte funcionalidade:

Depósito/levantamento de quantias (são lançadas excepções do tipo InvalidDeposit ou InvalidWithdrawal , caso não seja possível realizar depósitos ou levantamentos, respectivamente);
- Consulta do saldo actual;
- Consulta do número;
- Actualização do saldo, considerando taxas de juros (caso estes já tenham vencido).
As contas à ordem têm taxas de juro de 0% e não permitem, nem levantamentos de valores superiores ao saldo, nem depósitos de quantias negativas (são lançadas excepções em ambos os casos). As contas poupança não permitem nem depósitos nem levantamentos de dinheiro (é lançada uma excepção) e caracterizam-se por uma dada taxa de juro e uma duração em dias (à qual o juro diz respeito) que são indicadas no momento de criação da conta poupança.

Quando os juros de uma conta poupança vencem, o saldo e o valor dos juros são automaticamente depositados na conta bancária associada à conta poupança, que deve ser encerrada e removida. Esta funcionalidade (depositar o saldo e juros na conta e fechar a conta poupança) é da resposabilidade da conta poupança. Não é necessário detectar vencimentos de contas poupança.

